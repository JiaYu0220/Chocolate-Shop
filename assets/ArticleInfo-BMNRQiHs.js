import{_ as g,m as c,a as x,e as l,b as t,t as n,F as _,r as I,c as p,w as h,n as u,f as a,d as b,g as v,h as w,o as r}from"./index-D5bxwdZD.js";import{l as y}from"./loadingStore-X0dCeu3y.js";import{h as A}from"./helperStore-Cv9sDlZJ.js";import{a as f}from"./articleStore-CrXeicO0.js";import{s as k}from"./swalStore-BY5kGDbB.js";var S={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/Chocolate-Shop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:L,VITE_PATH:E}=S,T={data(){return{article:{},currentId:"",prevId:"",nextId:""}},mounted(){this.init()},watch:{"$route.params.id":{handler(){this.init()},deep:!0}},methods:{async init(){this.showLoading(),window.scrollTo(0,0);const s=[this.getSingleArticle(),this.getAllArticles()];(await Promise.allSettled(s)).forEach(o=>{o.status==="rejected"&&(this.hideLoading(),this.$swal(o.response.data))}),this.getAdjacentArticleId(),this.hideLoading()},async getSingleArticle(){try{this.currentId=this.$route.params.id;const s=`${L}/api/${E}/article/${this.currentId}`,i=await this.$http.get(s);this.article=i.data.article}catch(s){this.hideLoading(),this.apiErrorSwal(s)}},getAdjacentArticleId(){const s=this.articles.length-1,i=this.articles.findIndex(o=>o.id===this.currentId);i!==0&&(this.prevId=this.articles[i-1].id),i!==s&&(this.nextId=this.articles[i+1].id)},...c(y,["showLoading","hideLoading"]),...c(A,["timestampToDate"]),...c(f,["getAllArticles"]),...c(k,["apiErrorSwal"])},computed:{...x(f,["articles"])}},V={class:"w-full h-64 md:h-96 relative"},j=["src"],R={class:"absolute bottom-0 left-0 flex justify-center w-full mb-8 md:mb-12"},D={class:"text-primary-50 font-bold p-4 bg-primary-800/60"},B={class:"md:text-lg mb-2"},C={class:"text-xl md:text-4xl"},N={class:"container py-10"},P={class:"md:w-1/2 mx-auto text-wrap mb-6"},O={class:"md:w-1/2 mx-auto mb-20"},U={class:"flex justify-between md:text-lg"},z=t("i",{class:"bi bi-chevron-left me-1"},null,-1),F=t("i",{class:"bi bi-chevron-left me-1"},null,-1),H=t("i",{class:"bi bi-chevron-right ml-1"},null,-1),M=t("i",{class:"bi bi-chevron-right ml-1"},null,-1);function $(s,i,o,q,e,G){const d=w("RouterLink");return Object.keys(e.article).length?(r(),l(_,{key:0},[t("div",V,[t("img",{class:"object-cover h-full w-full",lazy:"loading",src:e.article.image,alt:"文章圖"},null,8,j),t("div",R,[t("div",D,[t("p",B,n(s.timestampToDate(e.article.create_at)),1),t("h2",C,n(e.article.title),1)])])]),t("div",N,[t("pre",P,n(e.article.content),1),t("ul",O,[(r(!0),l(_,null,I(e.article.tag,m=>(r(),l("li",{key:m,class:"text-primary-700"},"# "+n(m),1))),128))]),t("div",U,[e.prevId?(r(),p(d,{key:0,class:"link",to:`/article/${e.prevId}`},{default:h(()=>[z,a("上一篇")]),_:1},8,["to"])):(r(),l("span",{key:1,class:u(["text-stone-500",{link:e.prevId}])},[F,a("上一篇 ")],2)),b(d,{class:"link",to:"/articles"},{default:h(()=>[a("返回文章列表")]),_:1}),e.nextId?(r(),p(d,{key:2,class:"link",to:`/article/${e.nextId}`},{default:h(()=>[a("下一篇"),H]),_:1},8,["to"])):(r(),l("span",{key:3,class:u(["text-stone-500",{link:e.nextId}])},[a(" 下一篇"),M],2))])])],64)):v("",!0)}const Y=g(T,[["render",$]]);export{Y as default};
