import{F as B}from"./FormFloat-DDE32hwE.js";import{I as G,T as W,C as J,L as N,s as R,P as K,a as X}from"./TableComponent-B7OiIO04.js";import{i as k,_ as L,o as c,c as u,h as U,b as o,a as l,n as h,r as m,f as T,w as d,k as w,v as Y,g as A,l as Q,e as Z,d as S,q as ee,s as C,F as M,m as V,t as P,u as j,x as te}from"./index-jy0z-i-L.js";import{l as I}from"./loadingStore-DUq4jI8Z.js";var oe={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:E,VITE_PATH:F}=oe,se={data(){return{isDragfile:!1}},components:{IconLoading:G},props:{returnUrl:{type:Boolean,default:!1},isMultiple:{type:Boolean,default:!1},isLoading:{type:Boolean}},methods:{handleChange(s){this.returnUrl?this.isMultiple?(console.log("多檔案"),this.uploadMultiImg(s)):this.uploadImg(s):this.$emit("emitChange",s)},async uploadImg(s){try{this.loadingStatus.imageUrl=!0;const t=s.target.files[0],n=new FormData;n.append("file-to-upload",t);const x=`${E}/api/${F}/admin/upload`,{data:e}=await this.$http.post(x,n);this.$emit("emitChange",e.imageUrl),this.loadingStatus.imageUrl=!1}catch(t){console.log(t),this.loadingStatus.imageUrl=!1,this.$swal(t.data.message)}},async uploadMultiImg(s){try{this.loadingStatus.imagesUrl=!0;const{files:t}=s.target,n=`${E}/api/${F}/admin/upload`;console.log(t);const x=Object.values(t).map(async y=>{const g=new FormData;return g.append("file-to-upload",y),(await this.$http.post(n,g)).data.imageUrl}),e=await Promise.all(x);console.log(e),this.$emit("emitChange",e);const i=s.target;i.value="",this.loadingStatus.imagesUrl=!1}catch(t){console.log(t),this.loadingStatus.imagesUrl=!1,this.$swal(t.data.message)}}},computed:{...k(I,["loadingStatus"])}},le=o("i",{class:"bi bi-file-earmark-image-fill text-2xl"},null,-1),ne=o("p",null,"請拖曳圖片檔案到此區，或點擊後選取圖片檔案",-1),ie={key:0},re=o("p",null,"PNG、JPG、JPEG",-1),ae=["multiple","disabled"],de={key:1,class:"absolute w-full h-full bg-primary-50 opacity-80 flex items-center justify-center"};function ce(s,t,n,x,e,i){const y=m("IconLoading");return c(),u("label",{for:"imageInput",class:h(["flex flex-col items-center justify-center p-4 text-stone-400 text-center border-4 rounded-md cursor-pointer w-full relative duration-150 text-sm md:text-base hover:bg-stone-100",e.isDragfile?"border-primary-300":"border-stone-300 border-dashed"])},[le,ne,n.isMultiple?(c(),u("p",ie,"可上傳多個檔案")):U("",!0),re,o("input",{class:"opacity-0 absolute w-full h-full cursor-pointer",type:"file",accept:".png, .jpg, .jpeg",id:"imageInput",ref:"imageFile",title:"",multiple:n.isMultiple,disabled:n.isLoading,onChange:t[0]||(t[0]=g=>i.handleChange(g)),onDragover:t[1]||(t[1]=g=>e.isDragfile=!0),onDrop:t[2]||(t[2]=g=>e.isDragfile=!1),onDragleave:t[3]||(t[3]=g=>e.isDragfile=!1)},null,40,ae),n.isLoading?(c(),u("div",de,[l(y,{size:"lg"})])):U("",!0)],2)}const O=L(se,[["render",ce]]),pe={components:{TransitionFade:W},props:{target:String,closeAttachMethod:Function},data(){return{modal:null,isShow:!1,topScroll:0,leftScroll:0}},mounted(){this.modal=this.$refs[this.target]},methods:{showModal(){this.topScroll=window.scrollY,this.leftScroll=window.scrollX,this.modal.showModal(),this.isShow=!0,this.disableScroll()},closeModal(){this.isShow=!1,this.enableScroll(),this.$refs[this.target].scrollTop=0,this.closeAttachMethod&&this.closeAttachMethod()},disableScroll(){document.body.classList.add("modal-open"),document.body.style.top=`-${this.topScroll}px`},enableScroll(){document.body.classList.remove("modal-open"),document.body.style.top="",window.scrollTo(this.leftScroll,this.topScroll)},onAfterLeave(){this.modal.close()}}},me={class:"flex mb-6"},ue=o("i",{class:"bi bi-x-lg text-2xl"},null,-1),ge=[ue];function he(s,t,n,x,e,i){const y=m("TransitionFade");return c(),T(y,{onOnAfterLeave:i.onAfterLeave},{default:d(()=>[w(o("dialog",{ref:n.target,onKeydown:t[1]||(t[1]=Q(Z(()=>{},["prevent"]),["escape"])),class:h(["backdrop:bg-gray-950/30 rounded-md shadow-md p-8 bg-primary-50 w-full md:w-2/3 lg:w-1/2",[{"backdrop:bg-transparent":!e.isShow},s.$attrs.class]])},[o("div",me,[A(s.$slots,"title",{titleClass:"text-2xl font-bold"}),o("button",{type:"button",class:"btn btn-link rounded-full shadow-none -mr-3 ml-auto -my-2",onClick:t[0]||(t[0]=(...g)=>i.closeModal&&i.closeModal(...g))},ge)]),A(s.$slots,"default")],34),[[Y,e.isShow]])]),_:3},8,["onOnAfterLeave"])}const H=L(pe,[["render",he]]),fe={data(){return{previews:{},cropperUrl:"",fileName:this.downName,option:{img:"",info:!0,outputSize:1,full:!0,outputType:"png",original:!1,canScale:!0,canMove:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:750,autoCropHeight:500,centerBox:!0,high:!0,maxImgSize:99999,mode:"contain"},fixed:!0,fixedNumber:[4,3]}},components:{FormFloat:B,FileInput:O,ModalComponent:H},props:{downName:String},watch:{downName(){this.fileName=this.downName}},methods:{upload(s){if(s.target.files.length){const t=s.target.files[0],n=new FileReader;n.onload=x=>{const e=window.URL.createObjectURL(new Blob([x.target.result]));this.option.img=e},n.readAsArrayBuffer(t)}},download(){const s=document.createElement("a");s.download=this.fileName,this.$refs.cropper.getCropBlob(t=>{this.cropperUrl=window.URL.createObjectURL(t),s.href=this.cropperUrl,s.click()})},clear(){this.option.img=""}}},_e=o("i",{class:"bi bi-scissors mr-1"},null,-1),be=o("p",{class:"mb-2"},"請選擇圖片檔案或貼上圖片網址：",-1),ye=o("i",{class:"bi bi-x text-xl"},null,-1),xe=[ye],we={key:0,class:"w-full h-[200px] md:h-[400px]"},Ue={class:"flex mt-5"};function ve(s,t,n,x,e,i){const y=m("FileInput"),g=m("FormFloat"),f=m("VueCropper"),v=m("ModalComponent");return c(),u(M,null,[o("button",{type:"button",class:"btn btn-primary-light",onClick:t[0]||(t[0]=r=>s.$refs.cropperModal.showModal())},[_e,S("裁剪圖片小工具 ")]),l(v,{ref:"cropperModal",target:"cropperModal","close-attach-method":i.clear},{title:d(({titleClass:r})=>[o("h3",{class:h(r)},"裁剪圖片小工具",2)]),default:d(()=>[be,l(y,{onEmitChange:i.upload,class:"mb-3"},null,8,["onEmitChange"]),l(g,{"label-for":"imgUrl",label:"圖片網址",class:"mb-3"},ee({default:d(({inputClass:r})=>[w(o("input",{type:"text",name:"圖片",id:"imgUrl",class:h(r),"onUpdate:modelValue":t[1]||(t[1]=b=>e.option.img=b),placeholder:""},null,2),[[C,e.option.img]])]),_:2},[e.option.img?{name:"icon",fn:d(({iconClass:r})=>[o("button",{type:"button",class:h(r),onClick:t[2]||(t[2]=(...b)=>i.clear&&i.clear(...b))},xe,2)]),key:"0"}:void 0]),1024),e.option.img?(c(),u("div",we,[l(f,{ref:"cropper",img:e.option.img,"center-wrapper":"","output-size":e.option.outputSize,"output-type":e.option.outputType,info:e.option.info,full:e.option.full,fixed:e.fixed,"fixed-number":e.fixedNumber,"can-move":e.option.canMove,"can-move-box":e.option.canMoveBox,"can-scale":e.option.canScale,original:e.option.original,"auto-crop":e.option.autoCrop,autoCropWidth:e.option.autoCropWidth,autoCropHeight:e.option.autoCropHeight,"center-box":e.option.centerBox,high:e.option.high,"max-img-size":e.option.maxImgSize,mode:e.option.mode},null,8,["img","output-size","output-type","info","full","fixed","fixed-number","can-move","can-move-box","can-scale","original","auto-crop","autoCropWidth","autoCropHeight","center-box","high","max-img-size","mode"])])):U("",!0),o("div",Ue,[e.option.img?(c(),T(g,{key:0,"label-for":"fileName",label:"下載的檔案名稱",class:"flex-grow"},{default:d(({inputClass:r})=>[w(o("input",{type:"text",name:"檔案名稱",id:"fileName",class:h(["rounded-r-none",r]),"onUpdate:modelValue":t[3]||(t[3]=b=>e.fileName=b),placeholder:""},null,2),[[C,e.fileName]])]),_:1})):U("",!0),e.option.img?(c(),u("button",{key:1,class:"btn btn-primary rounded-l-none text-nowrap",onClick:t[4]||(t[4]=r=>i.download())},"下載")):U("",!0)])]),_:1},8,["close-attach-method"])],64)}const Pe=L(fe,[["render",ve]]);var Ce={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:Se,VITE_PATH:Me}=Ce,Ie={components:{ModalComponent:H,FormFloat:B,FileInput:O,CopyBtn:J,LoadingBtn:N,CropperComponent:Pe},props:{product:Object,isNew:Boolean,pagination:Object},data(){return{tempProduct:{},tempImageUrl:"",tempImagesUrl:""}},mounted(){this.tempProduct=this.product},watch:{product(){this.tempProduct=this.product}},methods:{showModal(){this.$refs.productModalComponent.showModal()},closeModal(){this.$refs.productModalComponent.closeModal(),this.$refs.productForm.resetForm()},addImageUrl(s){this.tempProduct.imageUrl=s},addImagesUrl(s){this.tempProduct.imagesUrl.push(s),this.tempImagesUrl=""},addImagesUrlArray(s){this.tempProduct.imagesUrl.push(...s)},async updateProduct(){try{let s=`${Se}/api/${Me}/admin/product`,t="post";this.isNew||(s+=`/${this.tempProduct.id}`,t="put",this.loadingStatus.productId=this.tempProduct.id),this.closeModal(),console.log(this.tempProduct);const n=await this.$http[t](s,{data:this.tempProduct});this.$emit("getData",this.pagination.current_page),this.swalToast(n.data.message)}catch(s){console.log(s),this.hideLoading(),this.$swal(s.data.message)}},...V(R,["swalToast"]),...V(I,["showLoading","hideLoading"])},computed:{...k(I,["loadingStatus"])}},Le={class:"flex justify-between items-end mb-3"},Ve=o("h4",{class:"text-xl font-bold text-primary-800"},"圖片",-1),ke=o("p",{class:"text-stone-500 mb-3"},"※ 請先使用裁剪小工具將圖片裁剪成適當長寬比 (4:3) 再上傳！",-1),Te={class:"pb-8 mb-4 border-b border-primary-700"},Ae=o("h5",{class:"text-lg mb-1"},"- 主圖 -",-1),Ee=o("p",{class:"mb-2"},"請選擇圖片檔案或貼上圖片網址：",-1),Fe={class:"flex mb-5"},$e=["isLoading","disabled"],De={key:1,class:"mb-3 md:w-1/2"},Be={class:"relative border-2 border-primary-300 rounded-md p-1"},Ne=["src"],Re=o("i",{class:"bi bi-trash-fill"},null,-1),je=[Re],Oe=o("hr",null,null,-1),He=o("h5",{class:"text-lg mt-3 mb-1"},"- 其他圖片 -",-1),qe=o("p",{class:"mb-2"},"請選擇圖片檔案或貼上圖片網址：",-1),ze={class:"flex mb-3"},Ge={key:2,class:"grid grid-cols-2 gap-2 md:grid-cols-3 md:gap-3"},We=["src"],Je=["onClick"],Ke=o("i",{class:"bi bi-trash-fill"},null,-1),Xe=[Ke],Ye=o("h4",{class:"text-xl font-bold text-primary-800 mb-4"},"文字",-1),Qe={class:"flex gap-3"},Ze={class:"w-2/3"},et={class:"w-1/3"},tt={class:"flex gap-3"},ot={class:"w-2/3"},st={class:"w-1/3"},lt=o("hr",null,null,-1),nt={class:"flex items-center"},it=o("label",{for:"is_enabled"},"是否上架",-1),rt={class:"mt-5 text-end"},at=o("button",{type:"submit",class:"btn btn-primary"}," 儲存編輯",-1);function dt(s,t,n,x,e,i){const y=m("CropperComponent"),g=m("FileInput"),f=m("FormFloat"),v=m("CopyBtn"),r=m("LoadingBtn"),b=m("VField"),q=m("VForm"),z=m("ModalComponent");return c(),T(z,{target:"product",ref:"productModalComponent"},{title:d(({titleClass:p})=>[o("h3",{class:h(p)},P(n.isNew?"新增":"編輯")+"產品",3)]),default:d(()=>[o("div",Le,[Ve,l(y,{"down-name":e.tempProduct.title},null,8,["down-name"])]),ke,o("div",Te,[Ae,e.tempProduct.imageUrl?(c(),u("div",De,[o("div",Be,[o("img",{src:e.tempProduct.imageUrl,class:"object-cover rounded-sm",alt:"產品圖"},null,8,Ne),o("button",{type:"button",class:"absolute right-0 top-0 p-1 rounded-md bg-primary-50 text-primary-800 duration-150 hover:text-red-500 focus:text-red-500",onClick:t[2]||(t[2]=p=>e.tempProduct.imageUrl="")},je),l(v,{text:e.tempProduct.imageUrl,class:"absolute right-0 bottom-0 p-1 rounded-md bg-primary-50 text-primary-800 duration-150 hover:text-primary-300"},null,8,["text"])])])):(c(),u(M,{key:0},[Ee,l(g,{"return-url":!0,onEmitChange:i.addImageUrl,class:"mb-3",isLoading:s.loadingStatus.imageUrl},null,8,["onEmitChange","isLoading"]),o("div",Fe,[l(f,{"label-for":"imageUrl",label:"圖片網址",class:"flex-grow"},{default:d(({inputClass:p})=>[w(o("input",{type:"text",name:"圖片",id:"imageUrl",class:h([p,"rounded-r-none"]),"onUpdate:modelValue":t[0]||(t[0]=a=>e.tempImageUrl=a),placeholder:""},null,2),[[C,e.tempImageUrl]])]),_:1}),o("button",{type:"button",class:"btn btn-primary rounded-l-none text-nowrap",isLoading:s.loadingStatus.imageUrl,disabled:!e.tempImageUrl,onClick:t[1]||(t[1]=p=>e.tempProduct.imageUrl=e.tempImageUrl)},"加入圖片",8,$e)])],64)),Oe,He,qe,l(g,{"return-url":!0,isMultiple:!0,onEmitChange:i.addImagesUrlArray,isLoading:s.loadingStatus.imagesUrl,class:"mb-3"},null,8,["onEmitChange","isLoading"]),o("div",ze,[l(f,{"label-for":"imageUrl",label:"圖片網址",class:"flex-grow"},{default:d(({inputClass:p})=>[w(o("input",{type:"text",name:"圖片",id:"imageUrl",class:h([p,"rounded-r-none"]),placeholder:"","onUpdate:modelValue":t[3]||(t[3]=a=>e.tempImagesUrl=a)},null,2),[[C,e.tempImagesUrl]])]),_:1}),l(r,{class:"btn btn-primary rounded-l-none text-nowrap",isLoading:s.loadingStatus.imagesUrl,disabled:!e.tempImagesUrl,onClick:t[4]||(t[4]=p=>i.addImagesUrl(e.tempImagesUrl))},{default:d(()=>[S("加入圖片")]),_:1},8,["isLoading","disabled"])]),Array.isArray(e.tempProduct.imagesUrl)?(c(),u("div",Ge,[(c(!0),u(M,null,j(e.tempProduct.imagesUrl,(p,a)=>(c(),u("div",{key:`img${a}`,class:"relative border-2 border-primary-300 rounded-md p-1"},[o("img",{src:p,class:"object-cover",alt:"產品圖"},null,8,We),o("button",{type:"button",class:"absolute right-0 top-0 p-1 rounded-md bg-primary-50 text-primary-800 duration-150 hover:text-red-500 focus:text-red-500",onClick:_=>e.tempProduct.imagesUrl.splice(a,1)},Xe,8,Je),l(v,{text:e.tempProduct.imagesUrl[a],msg:"圖片網址",class:"absolute right-0 bottom-0 p-1 rounded-md bg-primary-50 text-primary-800 duration-150 hover:text-primary-300"},null,8,["text"])]))),128))])):U("",!0)]),Ye,l(q,{class:"flex flex-col gap-3",ref:"productForm",onSubmit:i.updateProduct},{default:d(({errors:p})=>[l(f,{"label-for":"title",label:"名稱",errors:p},{default:d(({inputClass:a})=>[l(b,{type:"text",name:"名稱",id:"title",modelValue:e.tempProduct.title,"onUpdate:modelValue":t[5]||(t[5]=_=>e.tempProduct.title=_),class:h(a),rules:"required",placeholder:"",required:""},null,8,["modelValue","class"])]),_:2},1032,["errors"]),o("div",Qe,[o("div",Ze,[l(f,{"label-for":"category",label:"類別",errors:p},{default:d(({inputClass:a})=>[l(b,{type:"text",name:"類別",id:"category",modelValue:e.tempProduct.category,"onUpdate:modelValue":t[6]||(t[6]=_=>e.tempProduct.category=_),class:h(a),rules:"required",placeholder:"",required:""},null,8,["modelValue","class"])]),_:2},1032,["errors"])]),o("div",et,[l(f,{"label-for":"origin_price",label:"原價",errors:p},{default:d(({inputClass:a})=>[l(b,{type:"number",name:"原價",min:"0",id:"origin_price",modelValue:e.tempProduct.origin_price,"onUpdate:modelValue":t[7]||(t[7]=_=>e.tempProduct.origin_price=_),modelModifiers:{number:!0},class:h(a),rules:"required",placeholder:"",required:""},null,8,["modelValue","class"])]),_:2},1032,["errors"])])]),o("div",tt,[o("div",ot,[l(f,{"label-for":"unit",label:"單位",errors:p},{default:d(({inputClass:a})=>[l(b,{type:"text",name:"單位",id:"unit",modelValue:e.tempProduct.unit,"onUpdate:modelValue":t[8]||(t[8]=_=>e.tempProduct.unit=_),class:h(a),rules:"required",placeholder:"",required:""},null,8,["modelValue","class"])]),_:2},1032,["errors"])]),o("div",st,[l(f,{"label-for":"price",label:"售價",errors:p},{default:d(({inputClass:a})=>[l(b,{type:"number",name:"售價",min:"0",id:"price",modelValue:e.tempProduct.price,"onUpdate:modelValue":t[9]||(t[9]=_=>e.tempProduct.price=_),modelModifiers:{number:!0},class:h(a),rules:"required",placeholder:"",required:""},null,8,["modelValue","class"])]),_:2},1032,["errors"])])]),lt,l(f,{"label-for":"description",label:"產品描述"},{default:d(({inputClass:a})=>[w(o("textarea",{type:"text",name:"產品描述",id:"description","onUpdate:modelValue":t[10]||(t[10]=_=>e.tempProduct.description=_),class:h(a),placeholder:""},`
            `,2),[[C,e.tempProduct.description]])]),_:1}),l(f,{"label-for":"content",label:"說明內容"},{default:d(({inputClass:a})=>[w(o("textarea",{type:"text",name:"說明內容",id:"content","onUpdate:modelValue":t[11]||(t[11]=_=>e.tempProduct.content=_),class:h(a),placeholder:""},`
            `,2),[[C,e.tempProduct.content]])]),_:1}),o("div",nt,[w(o("input",{id:"is_enabled",class:"rounded-sm border-stone-400 bg-primary-50 text-primary-800 mr-2 focus:ring focus:ring-primary-800 focus:ring-opacity-50 focus:border-primary-800",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[12]||(t[12]=a=>e.tempProduct.is_enabled=a)},null,512),[[te,e.tempProduct.is_enabled]]),it])]),_:1},8,["onSubmit"]),o("div",rt,[o("button",{type:"button",class:"btn btn-outline-primary me-3",onClick:t[13]||(t[13]=(...p)=>i.closeModal&&i.closeModal(...p))}," 取消編輯"),at])]),_:1},512)}const ct=L(Ie,[["render",dt]]);var pt={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:$,VITE_PATH:D}=pt,mt={data(){return{products:[],tempProduct:{},isNew:!1,pagination:{}}},components:{ProductModal:ct,PaginationComponent:K,LoadingBtn:N,TableComponent:X},mounted(){this.showLoading(),this.getAdminProducts()},methods:{async delProduct(s){if((await this.delSwal("產品",s.title)).isConfirmed)try{const n=`${$}/api/${D}/admin/product/${s.id}`;await this.$http.delete(n),this.swalToast(`已刪除產品「${s.title}」`),this.getAdminProducts(this.pagination.current_page)}catch(n){this.$swals(n.data.message)}},async getAdminProducts(s=1){try{const t=`${$}/api/${D}/admin/products?page=${s}`,{data:n}=await this.$http.get(t);this.products=n.products,this.pagination=n.pagination,this.loadingStatus.productId="",this.hideLoading()}catch(t){this.hideLoading(),this.$swel(t.data.message)}},openModal(s,t){switch(s){case"new":this.tempProduct={imagesUrl:[],is_enabled:0},this.isNew=!0;break;case"edit":this.tempProduct={...t},Array.isArray(this.tempProduct.imagesUrl)||(this.tempProduct.imagesUrl=[]),this.isNew=!1;break}this.$refs.productModal.showModal()},closeModal(){this.$refs.delModal.close()},...V(I,["showLoading","hideLoading"]),...V(R,["swalToast","delSwal"])},computed:{...k(I,["loadingStatus"])}},ut={class:"flex justify-between items-center mb-8"},gt=o("h2",{class:"text-2xl font-bold"},"產品管理",-1),ht=o("i",{class:"bi bi-plus-lg me-1"},null,-1),ft=o("th",{scope:"col",class:"min-w-8 pr-1 md:pr-2 md:pl-4"}," 分類 ",-1),_t=o("th",{scope:"col",class:"min-w-24 pr-1 md:pr-2"},"產品名稱",-1),bt=o("th",{scope:"col",class:"text-end min-w-9 pr-1 md:px-2"}," 原價 ",-1),yt=o("th",{scope:"col",class:"text-end min-w-9 pr-1 md:px-2"}," 售價 ",-1),xt=o("th",{scope:"col",class:"text-end min-w-9 pr-1 md:px-2"}," 庫存 ",-1),wt=o("th",{scope:"col",class:"text-center pr-1 md:px-2"}," 狀態 ",-1),Ut=o("th",{scope:"col",class:"min-w-10 text-end md:pr-4"},"編輯",-1),vt={class:"py-2 pr-1 md:pr-2 md:pl-4"},Pt={class:"py-2 pr-1"},Ct={class:"py-2 pr-1 text-end md:px-2"},St={class:"py-2 pr-1 text-end md:px-2"},Mt={class:"py-2 pr-1 text-end md:px-2"},It={class:"py-2 pr-1 text-center md:px-2"},Lt={key:0,class:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-sm text-nowrap bg-green-50 text-green-600"},Vt=o("span",{class:"hidden md:inline-block h-1.5 w-1.5 rounded-full bg-green-600"},null,-1),kt={key:1,class:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-sm bg-red-50 text-red-600"},Tt=o("span",{class:"hidden md:inline-block h-1.5 w-1.5 rounded-full bg-red-600"},null,-1),At={class:"py-2 md:pr-4"},Et={class:"flex gap-2 justify-end"},Ft={key:0,class:"bi bi-pencil-fill"},$t={key:0,class:"bi bi-trash3-fill"};function Dt(s,t,n,x,e,i){const y=m("LoadingBtn"),g=m("TableComponent"),f=m("PaginationComponent"),v=m("ProductModal");return c(),u(M,null,[o("div",ut,[gt,o("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=r=>i.openModal("new"))},[ht,S("新增產品 ")])]),l(g,{class:"mb-8"},{th:d(()=>[ft,_t,bt,yt,xt,wt,Ut]),tr:d(()=>[(c(!0),u(M,null,j(e.products,r=>(c(),u("tr",{key:r.id},[o("td",vt,P(r.category),1),o("td",Pt,P(r.title),1),o("td",Ct,P(r.origin_price),1),o("td",St,P(r.price),1),o("td",Mt,P(r.stock),1),o("td",It,[r.is_enabled?(c(),u("span",Lt,[Vt,S("上架 ")])):(c(),u("span",kt,[Tt,S("下架 ")]))]),o("td",At,[o("div",Et,[l(y,{class:"btn btn-link p-1 md:p-2","is-loading":s.loadingStatus.productId===r.id,onClick:b=>i.openModal("edit",r)},{default:d(()=>[s.loadingStatus.productId!==r.id?(c(),u("i",Ft)):U("",!0)]),_:2},1032,["is-loading","onClick"]),l(y,{class:"btn btn-link p-1 md:p-2","is-loading":s.loadingStatus.productId===r.id,onClick:b=>i.delProduct(r)},{default:d(()=>[s.loadingStatus.productId!==r.id?(c(),u("i",$t)):U("",!0)]),_:2},1032,["is-loading","onClick"])])])]))),128))]),_:1}),l(f,{pagination:e.pagination,onGetData:i.getAdminProducts},null,8,["pagination","onGetData"]),l(v,{ref:"productModal",product:e.tempProduct,"is-new":e.isNew,pagination:e.pagination,onGetData:i.getAdminProducts},null,8,["product","is-new","pagination","onGetData"])],64)}const Ot=L(mt,[["render",Dt]]);export{Ot as default};
