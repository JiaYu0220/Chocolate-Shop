import{F as g}from"./FormFloat-DDE32hwE.js";import{M as w}from"./MyLoading-Btn50XCb.js";import{_ as y,m as V,c as x,a as n,b as s,w as r,e as L,F as v,r as a,o as F,n as d}from"./index-jy0z-i-L.js";import{l as k}from"./loadingStore-DUq4jI8Z.js";var E={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:M}=E,P={data(){return{user:{},isPwVisible:!1}},components:{FormFloat:g,MyLoading:w},methods:{autoLogin(){this.user={username:"alice49885@gmail.com",password:"a12345"},this.login()},async login(){var i;try{this.showLoading();const e=`${M}/admin/signin`,{data:u}=await this.$http.post(e,this.user),{token:c,expired:t}=u;document.cookie=`token=${c}; expires=${new Date(t)}`,this.$router.push("/admin/products")}catch(e){this.$swal(((i=e.data)==null?void 0:i.message)||"發生錯誤")}finally{this.hideLoading()}},...V(k,["showLoading","hideLoading"])}},C={class:"bg-primary-100"},S={class:"container"},R={class:"h-screen flex justify-center items-center"},U={class:"w-72"},q=s("h1",{class:"font-zenMaru text-5xl text-primary-800 text-center mb-4"},"歐可",-1),A=s("h2",{class:"font-bold text-xl text-center py-6"}," 後台登入 ",-1),B={class:"mb-3"},D={class:"mb-6"},T=s("button",{type:"submit",class:"w-full btn btn-primary btn-lg mb-3"},"進入後台",-1);function $(i,e,u,c,t,m){const f=a("MyLoading"),p=a("VField"),b=a("FormFloat"),h=a("VForm");return F(),x(v,null,[n(f),s("div",C,[s("div",S,[s("div",R,[s("div",U,[q,n(h,{onSubmit:L(m.login,["prevent"]),class:"bg-primary-50 p-4 rounded-lg border-2 border-primary-800"},{default:r(({errors:_})=>[A,s("div",B,[n(b,{"label-for":"email",label:"電子信箱",errors:_},{default:r(({inputClass:o})=>[n(p,{type:"email",name:"電子信箱",id:"email",rules:"email|required",modelValue:t.user.username,"onUpdate:modelValue":e[0]||(e[0]=l=>t.user.username=l),class:d(o),placeholder:"",required:""},null,8,["modelValue","class"])]),_:2},1032,["errors"])]),s("div",D,[n(b,{"label-for":"password",label:"密碼",errors:_},{default:r(({inputClass:o})=>[n(p,{type:`${t.isPwVisible?"text":"password"}`,name:"密碼",id:"password",rules:"required",modelValue:t.user.password,"onUpdate:modelValue":e[1]||(e[1]=l=>t.user.password=l),class:d(o),placeholder:"",required:""},null,8,["type","modelValue","class"])]),icon:r(({iconClass:o})=>[s("button",{class:d(o),type:"button",onClick:e[2]||(e[2]=l=>t.isPwVisible=!t.isPwVisible)},[s("i",{class:d(`text-2xl bi bi-eye-${t.isPwVisible?"slash-fill":"fill"}`)},null,2)],2)]),_:2},1032,["errors"])]),s("button",{type:"button",class:"w-full btn btn-primary btn-lg mb-3",onClick:e[3]||(e[3]=(...o)=>m.autoLogin&&m.autoLogin(...o))},"一鍵登入 (測試用)"),T,s("button",{type:"button",class:"w-full btn btn-link btn-lg",onClick:e[4]||(e[4]=o=>i.$router.go(-1))},"回上一頁")]),_:1},8,["onSubmit"])])])])])],64)}const O=y(P,[["render",$]]);export{O as default};
