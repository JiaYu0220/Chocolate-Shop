import{F as V}from"./FormFloat-B1KU6-Da.js";import{M as L}from"./MyLoading-CgCD00OC.js";import{L as y}from"./LogoComponent-Bhgdpffv.js";import{_ as x,m as F,e as k,d as t,b as o,w as l,F as v,h as i,o as C,n as r,f as E}from"./index-BBoj-WCo.js";import{l as P}from"./loadingStore-B4P190Xb.js";var R={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/Chocolate-Shop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:S}=R,M={components:{FormFloat:V,MyLoading:L,LogoComponent:y},data(){return{user:{},isPwVisible:!1}},methods:{autoLogin(){this.user={username:"alice49885@gmail.com",password:"a12345"},this.login()},async login(){var m;try{this.showLoading();const e=`${S}/admin/signin`,{data:c}=await this.$http.post(e,this.user),{token:u,expired:s}=c;document.cookie=`token=${u}; expires=${new Date(s)}`,this.$router.push("/admin/products"),this.hideLoading()}catch(e){this.hideLoading(),this.$swal(((m=e.data)==null?void 0:m.message)||"發生錯誤，請稍後再試")}},...F(P,["showLoading","hideLoading"])}},T={class:"bg-primary-100"},U={class:"container"},q={class:"h-screen flex justify-center items-center"},A={class:"w-72"},B=o("h2",{class:"font-bold text-xl text-center py-6"}," 後台登入 ",-1),D={class:"mb-3"},I={class:"mb-6"},N=o("button",{type:"submit",class:"w-full btn btn-primary btn-lg mb-3"},"進入後台",-1);function j(m,e,c,u,s,d){const h=i("MyLoading"),f=i("LogoComponent"),p=i("VField"),_=i("FormFloat"),g=i("RouterLink"),w=i("VForm");return C(),k(v,null,[t(h),o("div",T,[o("div",U,[o("div",q,[o("div",A,[t(f,{class:"mb-8 text-4xl"}),t(w,{onSubmit:d.login,class:"bg-primary-50 p-4 rounded-lg border-2 border-primary-800"},{default:l(({errors:b})=>[B,o("div",D,[t(_,{"label-for":"email",label:"電子信箱",errors:b},{default:l(({inputClass:n})=>[t(p,{type:"email",name:"電子信箱",id:"email",rules:"email|required",autocomplete:"username",modelValue:s.user.username,"onUpdate:modelValue":e[0]||(e[0]=a=>s.user.username=a),class:r(n),placeholder:"",required:""},null,8,["modelValue","class"])]),_:2},1032,["errors"])]),o("div",I,[t(_,{"label-for":"password",label:"密碼",errors:b},{default:l(({inputClass:n})=>[t(p,{type:`${s.isPwVisible?"text":"password"}`,name:"密碼",id:"password",rules:"required",autocomplete:"current-password",modelValue:s.user.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.user.password=a),class:r(n),placeholder:"",required:""},null,8,["type","modelValue","class"])]),icon:l(({iconClass:n})=>[o("button",{class:r(n),type:"button",onClick:e[2]||(e[2]=a=>s.isPwVisible=!s.isPwVisible)},[o("i",{class:r(`text-2xl bi bi-eye-${s.isPwVisible?"slash-fill":"fill"}`)},null,2)],2)]),_:2},1032,["errors"])]),o("button",{type:"button",class:"w-full btn btn-primary btn-lg mb-3",onClick:e[3]||(e[3]=(...n)=>d.autoLogin&&d.autoLogin(...n))},"一鍵登入 (測試用)"),N,t(g,{to:"/",class:"block text-center btn btn-link btn-lg"},{default:l(()=>[E("回首頁")]),_:1})]),_:1},8,["onSubmit"])])])])])],64)}const J=x(M,[["render",j]]);export{J as default};
