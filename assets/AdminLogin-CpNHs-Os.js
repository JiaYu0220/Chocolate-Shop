import{F as w}from"./FormFloat-BA6fetB_.js";import{M as y}from"./MyLoading-Duuv2Y0M.js";import{L as V}from"./LogoComponent-HdjwMevT.js";import{_ as L,m as x,c as F,a as n,b as o,w as a,F as v,r as i,o as C,n as m}from"./index-CQupeNWV.js";import{l as k}from"./loadingStore-BThw59I3.js";var E={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/Chocolate-Shop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:P}=E,S={components:{FormFloat:w,MyLoading:y,LogoComponent:V},data(){return{user:{},isPwVisible:!1}},methods:{autoLogin(){this.user={username:"alice49885@gmail.com",password:"a12345"},this.login()},async login(){var l;try{this.showLoading();const e=`${P}/admin/signin`,{data:u}=await this.$http.post(e,this.user),{token:c,expired:s}=u;document.cookie=`token=${c}; expires=${new Date(s)}`,this.$router.push("/admin/products"),this.hideLoading()}catch(e){this.hideLoading(),this.$swal(((l=e.data)==null?void 0:l.message)||"發生錯誤，請稍後再試")}},...x(k,["showLoading","hideLoading"])}},M={class:"bg-primary-100"},R={class:"container"},U={class:"h-screen flex justify-center items-center"},q={class:"w-72"},A=o("h2",{class:"font-bold text-xl text-center py-6"}," 後台登入 ",-1),B={class:"mb-3"},D={class:"mb-6"},T=o("button",{type:"submit",class:"w-full btn btn-primary btn-lg mb-3"},"進入後台",-1);function $(l,e,u,c,s,d){const g=i("MyLoading"),f=i("LogoComponent"),p=i("VField"),b=i("FormFloat"),h=i("VForm");return C(),F(v,null,[n(g),o("div",M,[o("div",R,[o("div",U,[o("div",q,[n(f,{class:"mb-8",size:"5xl"}),n(h,{onSubmit:d.login,class:"bg-primary-50 p-4 rounded-lg border-2 border-primary-800"},{default:a(({errors:_})=>[A,o("div",B,[n(b,{"label-for":"email",label:"電子信箱",errors:_},{default:a(({inputClass:t})=>[n(p,{type:"email",name:"電子信箱",id:"email",rules:"email|required",modelValue:s.user.username,"onUpdate:modelValue":e[0]||(e[0]=r=>s.user.username=r),class:m(t),placeholder:"",required:""},null,8,["modelValue","class"])]),_:2},1032,["errors"])]),o("div",D,[n(b,{"label-for":"password",label:"密碼",errors:_},{default:a(({inputClass:t})=>[n(p,{type:`${s.isPwVisible?"text":"password"}`,name:"密碼",id:"password",rules:"required",modelValue:s.user.password,"onUpdate:modelValue":e[1]||(e[1]=r=>s.user.password=r),class:m(t),placeholder:"",required:""},null,8,["type","modelValue","class"])]),icon:a(({iconClass:t})=>[o("button",{class:m(t),type:"button",onClick:e[2]||(e[2]=r=>s.isPwVisible=!s.isPwVisible)},[o("i",{class:m(`text-2xl bi bi-eye-${s.isPwVisible?"slash-fill":"fill"}`)},null,2)],2)]),_:2},1032,["errors"])]),o("button",{type:"button",class:"w-full btn btn-primary btn-lg mb-3",onClick:e[3]||(e[3]=(...t)=>d.autoLogin&&d.autoLogin(...t))},"一鍵登入 (測試用)"),T,o("button",{type:"button",class:"w-full btn btn-link btn-lg",onClick:e[4]||(e[4]=t=>l.$router.go(-1))},"回上一頁")]),_:1},8,["onSubmit"])])])])])],64)}const H=L(S,[["render",$]]);export{H as default};
