import{q as y,m as l,a as u,_ as F,o as s,c as S,w as f,b as e,t as i,l as m,e as a,f as n,F as k,g as h,d as w,h as p}from"./index-D3_6LEXB.js";import{l as C}from"./loadingStore-DT-oSTtX.js";import{c as N}from"./cartStore-Blp1LSfe.js";import{s as B,L}from"./LoadingBtn-_Q2in9eb.js";const{swalToast:v}=B(),_=y("favoriteStore",{state:()=>({favorites:[]}),actions:{getFavorites(){this.favorites=JSON.parse(localStorage.getItem("favorites"))||[]},handleFavorite(r,o){r?(this.favorites.push(o),v("已加入收藏")):(this.favorites=this.favorites.filter(t=>t!==o),v("已移除收藏")),localStorage.setItem("favorites",JSON.stringify(this.favorites))}}}),T={props:{product:Object},components:{LoadingBtn:L},data(){return{isFavorite:!1}},mounted(){this.isFavorite=this.favorites.includes(this.product.id)},methods:{toggleFavorite(){this.isFavorite=!this.isFavorite,this.handleFavorite(this.isFavorite,this.product.id)},...l(N,["postCart"]),...l(_,["handleFavorite"])},computed:{...u(C,["loadingStatus"]),...u(_,["favorites"])}},V={class:"h-64 overflow-hidden"},j=["src"],I={class:"p-5 grow flex flex-col"},O={class:"flex justify-between items-center"},J={class:"text mb-1"},P={key:0,class:"bi bi-heart-fill"},R={key:1,class:"bi bi-heart"},q={class:"font-bold text-lg text-primary-800 mb-1"},z={class:"text-sm mb-3"},A={class:"mb-3"},D={class:"text-2xl text-primary-800 mr-1"},E={key:0};function M(r,o,t,U,g,c){const b=p("LoadingBtn"),x=p("RouterLink");return s(),S(x,{to:`/product/${t.product.id}`,class:"flex flex-col bg-primary-50 rounded-md border border-primary-300 overflow-hidden h-full group/product"},{default:f(()=>[e("div",V,[e("img",{loading:"lazy",class:"object-cover h-full w-full group-hover/product:brightness-75 transition-all",src:t.product.imageUrl,alt:"產品圖"},null,8,j)]),e("div",I,[e("div",O,[e("p",J,i(t.product.category),1),e("button",{type:"button",class:"btn btn-link shadow-none",onClick:o[0]||(o[0]=m((...d)=>c.toggleFavorite&&c.toggleFavorite(...d),["prevent"]))},[g.isFavorite?(s(),a("i",P)):(s(),a("i",R))])]),e("p",q,i(t.product.title),1),e("p",z,i(t.product.unit),1),e("p",A,[e("span",D,[t.product.price!==t.product.origin_price?(s(),a(k,{key:0},[n("特惠")],64)):h("",!0),n(" NT$ "+i(t.product.price),1)]),t.product.price!==t.product.origin_price?(s(),a("del",E,"NT$ "+i(t.product.origin_price),1)):h("",!0)]),w(b,{class:"btn btn-primary w-full mt-auto",onClick:o[1]||(o[1]=m(d=>r.postCart(t.product.id),["prevent"])),"is-loading":r.loadingStatus.productId===t.product.id},{default:f(()=>[n("加入購物車")]),_:1},8,["is-loading"])])]),_:1},8,["to"])}const W=F(T,[["render",M]]);export{W as P,_ as f};
