import{P as L}from"./ProductCard-ydovxjAB.js";import{P as S}from"./PaginationComponent-DwEGBHzB.js";import{_ as x,m as c,a as g,e as o,b as a,t as k,d,F as h,i as _,g as E,r as p,o as t,c as b}from"./index-CY03ZQzG.js";import{l as f}from"./loadingStore-D3SGLAyx.js";import{p as y}from"./productStore-DhopGdoP.js";import{C as V}from"./CategoryLinks-BUfgfv3s.js";import{s as v}from"./swalStore-Dp0_3MaJ.js";import"./cartStore-CFSB6xlV.js";import"./LoadingBtn-BREpaRRS.js";var $={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/Chocolate-Shop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:D,VITE_PATH:T}=$,B={components:{ProductCard:L,PaginationComponent:S,CategoryLinks:V},data(){return{products:[],pagination:{}}},mounted(){this.getProducts()},watch:{"$route.query":{handler(){this.getProducts()},deep:!0}},methods:{async getProducts(e=1){try{this.showLoading();const{category:r=""}=this.$route.query;this.updatedCategory(r);const u=`${D}/api/${T}/products?page=${e}&category=${this.currentCategory}`,s=await this.$http.get(u);this.products=s.data.products,this.pagination=s.data.pagination,this.hideLoading()}catch(r){this.hideLoading(),this.apiErrorSwal(r)}},...c(f,["showLoading","hideLoading"]),...c(y,["updatedCategory"]),...c(v,["apiErrorSwal"])},computed:{...g(f,["loadingStatus"]),...g(y,["categories","currentCategory"])}},R={class:"container py-10"},A={class:"mb-8 border-b-2 border-primary-200 pb-10"},I={class:"pb-6 text-center text-2xl font-bold tracking-widest text-primary-800"},N={class:"text flex justify-center gap-4 font-medium md:gap-8"},U={class:"w-full"},j={key:0,class:"-m-4 mb-8 flex flex-wrap *:p-4"};function q(e,r,u,s,n,C){const l=p("CategoryLinks"),P=p("ProductCard"),w=p("PaginationComponent");return t(),o("div",R,[a("div",A,[a("h2",I,k(e.currentCategory||"全部"),1),a("ul",N,[d(l,{category:"全部"}),(t(!0),o(h,null,_(e.categories,(i,m)=>(t(),b(l,{key:m,category:m},null,8,["category"]))),128))])]),a("div",U,[n.products.length?(t(),o("ul",j,[(t(!0),o(h,null,_(n.products,i=>(t(),o("li",{class:"w-full md:w-1/2 xl:w-1/3",key:i.id},[d(P,{product:i},null,8,["product"])]))),128))])):E("",!0),d(w,{pagination:n.pagination,onGetData:C.getProducts},null,8,["pagination","onGetData"])])])}const W=x(B,[["render",q]]);export{W as default};
