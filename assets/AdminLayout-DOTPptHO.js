import{_ as h,o as c,f as p,w as d,g as L,T as M,m as g,c as _,b as e,a as s,d as u,n as f,r as l,h as y,F as T}from"./index-jy0z-i-L.js";import{l as v}from"./loadingStore-DUq4jI8Z.js";import{M as C}from"./MyLoading-Btn50XCb.js";const R={};function V(o,t){return c(),p(M,{name:"accordion"},{default:d(()=>[L(o.$slots,"default")]),_:3})}const E=h(R,[["render",V]]);var A={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:S}=A,O={data(){return{isMenuOpen:!1}},props:["ulClass"],methods:{async logout(){try{this.showLoading();const o=`${S}/logout`;await this.$http.post(o),document.cookie='token=; expires=Thu, 01 Jan 1970 00:00:00 GMT";',this.$router.push("/login")}catch{this.$swal("登出失敗，請再試一次")}finally{this.hideLoading()}},...g(v,["showLoading","hideLoading"])}},z={class:"mb-4 font-bold"},I=e("i",{class:"bi bi-clipboard-data-fill me-4"},null,-1),N={class:"mb-4 font-bold"},U=e("i",{class:"bi bi-bag-fill me-4"},null,-1),j={class:"mb-4 font-bold"},B=e("i",{class:"bi bi-stickies-fill me-4"},null,-1),D={class:"mb-4 font-bold"},P=e("i",{class:"bi bi-file-richtext-fill me-4"},null,-1),F={class:"font-bold mt-2 md:mt-auto"},H=e("i",{class:"bi bi-door-open-fill me-4"},null,-1);function G(o,t,r,b,m,i){const a=l("RouterLink");return c(),_("ul",{class:f(["text-primary-950 bg-primary-100 flex-grow flex flex-col justify-center w-full md:text-lg md:justify-start",r.ulClass])},[e("li",z,[s(a,{to:"/admin/dashboard",class:"block text-center py-3 mx-2 rounded-md hover:bg-primary-800 hover:text-primary-200 hover:shadow-md duration-300 md:pl-7 md:text-left",onClick:t[0]||(t[0]=n=>o.$emit("close-menu"))},{default:d(()=>[I,u("總覽 ")]),_:1})]),e("li",N,[s(a,{to:"/admin/products",class:"block text-center py-3 mx-2 rounded-md hover:bg-primary-800 hover:text-primary-200 hover:shadow-md duration-300 md:pl-7 md:text-left",onClick:t[1]||(t[1]=n=>o.$emit("close-menu"))},{default:d(()=>[U,u("產品 ")]),_:1})]),e("li",j,[s(a,{to:"/admin/orders",class:"block text-center py-3 mx-2 rounded-md hover:bg-primary-800 hover:text-primary-200 hover:shadow-md duration-300 md:pl-7 md:text-left",onClick:t[2]||(t[2]=n=>o.$emit("close-menu"))},{default:d(()=>[B,u("訂單 ")]),_:1})]),e("li",D,[s(a,{to:"/admin/articles",class:"block text-center py-3 mx-2 rounded-md hover:bg-primary-800 hover:text-primary-200 hover:shadow-md duration-300 md:pl-7 md:text-left",onClick:t[3]||(t[3]=n=>o.$emit("close-menu"))},{default:d(()=>[P,u("文章 ")]),_:1})]),e("li",F,[e("a",{class:"block text-center cursor-pointer py-3 rounded-md duration-300 hover:bg-primary-800 hover:text-primary-200 hover:shadow-md md:pl-7 md:mx-2 md:text-left",onClick:t[4]||(t[4]=(...n)=>i.logout&&i.logout(...n))},[H,u("登出 ")])])],2)}const J=h(O,[["render",G]]),W={props:["size"]};function q(o,t,r,b,m,i){return c(),_("h1",{class:f(`font-zenMaru text-${r.size} text-primary-800 text-center logoShadow`)}," / 可_可 \\ ",2)}const K=h(W,[["render",q]]);var Q={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:X}=Q,Y={data(){return{checkSuccess:!1,isMenuOpen:!1}},components:{LogoComponent:K,TransitionAccordion:E,AdminNav:J,MyLoading:C},mounted(){var t;const o=(t=document.cookie.split("; ").find(r=>r.startsWith("token=")))==null?void 0:t.split("=")[1];this.$http.defaults.headers.common.Authorization=o,this.checkout()},methods:{async checkout(){this.showLoading();try{const o=`${X}/api/user/check`;await this.$http.post(o),this.checkSuccess=!0,this.hideLoading()}catch{this.hideLoading(),await this.$swal("請再登入一次"),this.$router.push("/login")}},closeMenu(){this.isMenuOpen=!1},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},...g(v,["showLoading","hideLoading"])}},Z={class:"md:flex h-dvh"},ee={class:"hidden md:flex flex-col w-1/5 max-w-72 bg-primary-100 py-8 border-r-2 border-primary-200/20"},te={class:"bg-primary-100 fixed top-0 md:hidden w-full"},oe={class:"container flex justify-between items-center border-b-2 border-primary-300/50"},se={class:"mt-[74px] bg-primary-50 md:flex-grow md:mt-0"},ne={class:"container py-8"};function ie(o,t,r,b,m,i){const a=l("MyLoading"),n=l("LogoComponent"),x=l("AdminNav"),$=l("TransitionAccordion"),k=l("RouterView");return c(),_(T,null,[s(a),e("div",Z,[e("div",ee,[s(n,{class:"mb-8",size:"4xl"}),s(x)]),e("div",te,[e("div",oe,[s(n,{size:"2xl"}),e("button",{type:"button",class:"btn btn-link p-2 my-2 -mr-2 text-primary-950",onClick:t[0]||(t[0]=(...w)=>i.toggleMenu&&i.toggleMenu(...w))},[e("i",{class:f(["bi text-4xl",`${m.isMenuOpen?"bi-x":"bi-list"}`])},null,2)])]),s($,null,{default:d(()=>[m.isMenuOpen?(c(),p(x,{key:0,"ul-class":"absolute overflow-y-hidden h-[376px]",onCloseMenu:i.closeMenu},null,8,["onCloseMenu"])):y("",!0)]),_:1})]),e("div",se,[e("div",ne,[m.checkSuccess?(c(),p(k,{key:0})):y("",!0)])])])],64)}const de=h(Y,[["render",ie]]);export{de as default};
