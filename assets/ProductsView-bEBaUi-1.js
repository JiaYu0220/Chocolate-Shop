import{_ as x,m as p,a as g,e,b as s,t as L,d as n,F as h,i as _,w as k,r as i,o as t,c as v,j as E,v as T}from"./index-C2aWBhNW.js";import{s as b}from"./swalStore-DKeR5SB5.js";import{l as f}from"./loadingStore-CaS2FV-7.js";import{p as y}from"./productStore-TQuV6c-9.js";import{P as V}from"./ProductCard-Bmbzw5kO.js";import{P as D}from"./PaginationComponent-nMVcxO6y.js";import{C as $}from"./CategoryLinks-C4LtQa23.js";import{T as B}from"./TransitionFade-Du5nzGOQ.js";import"./cartStore-kEBqvF3p.js";import"./LoadingBtn-Bu5dDUl7.js";var F={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/Chocolate-Shop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:R,VITE_PATH:A}=F,I={components:{ProductCard:V,PaginationComponent:D,CategoryLinks:$,TransitionFade:B},data(){return{products:[],pagination:{}}},mounted(){this.getProducts()},watch:{"$route.query":{handler(){this.getProducts()},deep:!0}},methods:{async getProducts(a=1){try{this.showLoading();const{category:o=""}=this.$route.query;this.updatedCategory(o);const u=`${R}/api/${A}/products?page=${a}&category=${o}`,c=await this.$http.get(u);this.products=c.data.products,this.pagination=c.data.pagination,this.hideLoading()}catch(o){this.hideLoading(),this.apiErrorSwal(o)}},...p(f,["showLoading","hideLoading"]),...p(y,["updatedCategory"]),...p(b,["apiErrorSwal"])},computed:{...g(f,["loadingStatus"]),...g(y,["categories","currentCategory"])}},j={class:"container py-10"},U={class:"mb-8 border-b-2 border-primary-200 pb-10"},q={class:"pb-6 text-center text-2xl font-bold tracking-widest text-primary-800"},G={class:"text flex justify-center gap-4 font-medium md:gap-8"},H={class:"w-full"};function N(a,o,u,c,r,w){const l=i("CategoryLinks"),C=i("ProductCard"),P=i("TransitionFade"),S=i("PaginationComponent");return t(),e("div",j,[s("div",U,[s("h2",q,L(a.currentCategory||"全部"),1),s("ul",G,[n(l,{category:"全部"}),(t(!0),e(h,null,_(a.categories,(d,m)=>(t(),v(l,{key:m,category:m},null,8,["category"]))),128))])]),s("div",H,[n(P,{mode:"out-in"},{default:k(()=>[E((t(),e("ul",{key:r.products,class:"-m-4 mb-8 flex flex-wrap *:p-4"},[(t(!0),e(h,null,_(r.products,d=>(t(),e("li",{class:"w-full md:w-1/2 xl:w-1/3",key:d.id},[n(C,{product:d},null,8,["product"])]))),128))])),[[T,r.products.length]])]),_:1}),n(S,{pagination:r.pagination,onGetData:w.getProducts},null,8,["pagination","onGetData"])])])}const tt=x(I,[["render",N]]);export{tt as default};
