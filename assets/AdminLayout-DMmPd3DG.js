import{T as M}from"./TransitionAccordion-A4U4rn9g.js";import{m as h,_ as g,o as l,e as c,F as b,i as S,d as i,w as x,b as t,n as m,f as _,t as $,r as a,p as T,k as C,c as R,g as f}from"./index-DSvEBgKx.js";import{l as y}from"./loadingStore-CRsAEdG-.js";import{s as V}from"./scrollStore-DJWRycVU.js";import{L as E}from"./LogoComponent-iCTF_2pJ.js";import{M as O}from"./MyLoading-3pCiGpkn.js";var A={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/Chocolate-Shop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:I}=A,D={data(){return{isMenuOpen:!1,catalog:[{title:"產品",path:"products",icon:"bi-bag-fill"},{title:"優惠券",path:"coupons",icon:"bi-ticket-perforated-fill"},{title:"訂單",path:"orders",icon:"bi-stickies-fill"},{title:"文章",path:"articles",icon:"bi-file-richtext-fill"}]}},methods:{async logout(){try{this.showLoading();const e=`${I}/logout`;await this.$http.post(e),document.cookie='token=; expires=Thu, 01 Jan 1970 00:00:00 GMT";',this.$router.push("/login"),this.hideLoading()}catch{this.hideLoading(),this.$swal("登出失敗，請再試一次")}},...h(y,["showLoading","hideLoading"])}},N=e=>(T("data-v-84eda2d1"),e=e(),C(),e),U={class:"flex w-full flex-grow flex-col justify-center bg-primary-100 text-primary-950 md:justify-start md:text-lg"},j={class:"mt-2 font-bold md:mt-auto"},B=N(()=>t("i",{class:"bi bi-door-open-fill me-4"},null,-1));function P(e,o,d,v,n,r){const p=a("RouterLink");return l(),c("ul",U,[(l(!0),c(b,null,S(n.catalog,s=>(l(),c("li",{key:s.title,class:"mb-4 font-bold"},[i(p,{to:`/admin/${s.path}`,class:"mx-2 block rounded-md py-3 text-center duration-300 hover:bg-primary-800 hover:text-primary-200 hover:shadow-md md:pl-7 md:text-left",onClick:o[0]||(o[0]=u=>e.$emit("close-menu"))},{default:x(()=>[t("i",{class:m(`bi ${s.icon} me-4`)},null,2),_($(s.title),1)]),_:2},1032,["to"])]))),128)),t("li",j,[t("a",{class:"transition-color block cursor-pointer rounded-md border-l-8 border-transparent py-3 text-center text-primary-700 duration-300 hover:bg-primary-800 hover:text-primary-200 hover:shadow-md md:mx-2 md:pl-7 md:text-left",onClick:o[1]||(o[1]=(...s)=>r.logout&&r.logout(...s))},[B,_("登出 ")])])])}const z=g(D,[["render",P],["__scopeId","data-v-84eda2d1"]]);var F={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/Chocolate-Shop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:H}=F,G={data(){return{checkSuccess:!1,isMenuOpen:!1}},components:{LogoComponent:E,TransitionAccordion:M,AdminNav:z,MyLoading:O},mounted(){var o;const e=(o=document.cookie.split("; ").find(d=>d.startsWith("token=")))==null?void 0:o.split("=")[1];this.$http.defaults.headers.common.Authorization=e,this.checkLogin()},methods:{async checkLogin(){this.showLoading();try{const e=`${H}/api/user/check`;await this.$http.post(e),this.checkSuccess=!0,this.hideLoading()}catch{this.hideLoading(),await this.$swal("請再登入一次"),this.$router.push("/login")}},closeMenu(){this.isMenuOpen=!1},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},...h(y,["showLoading","hideLoading"]),...h(V,["getCurrentScroll","disableScroll","enableScroll"])},watch:{isMenuOpen(){this.isMenuOpen?(this.getCurrentScroll(),this.disableScroll()):this.enableScroll()}}},J={class:"h-dvh bg-primary-50 md:flex"},W={class:"hidden w-1/5 max-w-72 flex-col border-r-2 border-primary-200/20 bg-primary-100 py-8 md:flex"},q={class:"border-b-2 border-primary-300/50 bg-primary-100"},K={class:"container flex items-center justify-between"},Q={key:0,class:"h-[424px] overflow-y-hidden bg-primary-100"},X={class:"container py-6"},Y={class:"mt-[74px] md:mt-0 md:flex-grow"},Z={class:"container py-8"};function ee(e,o,d,v,n,r){const p=a("MyLoading"),s=a("LogoComponent"),u=a("AdminNav"),L=a("TransitionAccordion"),k=a("RouterView");return l(),c(b,null,[i(p),t("div",J,[t("div",W,[i(s,{class:"mb-8 text-4xl"}),i(u)]),t("div",{class:m(["fixed top-0 w-full backdrop-brightness-75 md:hidden",{"h-full":n.isMenuOpen}])},[t("div",q,[t("div",K,[i(s,{class:"text-2xl"}),t("button",{type:"button",class:"btn btn-link my-2 -mr-2 p-2 text-primary-950",onClick:o[0]||(o[0]=(...w)=>r.toggleMenu&&r.toggleMenu(...w))},[t("i",{class:m(["bi text-4xl",`${n.isMenuOpen?"bi-x":"bi-list"}`])},null,2)])])]),i(L,null,{default:x(()=>[n.isMenuOpen?(l(),c("div",Q,[t("div",X,[i(u,{onCloseMenu:r.closeMenu},null,8,["onCloseMenu"])])])):f("",!0)]),_:1})],2),t("div",Y,[t("div",Z,[n.checkSuccess?(l(),R(k,{key:0})):f("",!0)])])])],64)}const ae=g(G,[["render",ee]]);export{ae as default};
