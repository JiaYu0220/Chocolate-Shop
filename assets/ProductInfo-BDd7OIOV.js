import{_ as S,m as p,a as L,e as i,b as t,F as u,r as b,t as c,f as l,g as m,k,v as P,d as h,w as y,l as A,h as _,o as n,p as I,i as T}from"./index-DTQ0iRKP.js";import{l as g}from"./loadingStore-JENbuUSr.js";import{c as V}from"./cartStore-BLKiRWM4.js";import{P as j,r as C}from"./ProductSwiper-oi2d5-K8.js";import{L as E}from"./LoadingBtn-Cg_DCWH5.js";import{p as z}from"./productStore-DADYO0Ol.js";import"./ProductCard-g1cTl9cG.js";var U={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/Chocolate-Shop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:q,VITE_PATH:B}=U,R={props:["id"],components:{LoadingBtn:E,ProductSwiper:j},data(){return{product:{},qty:1}},mounted(){C(),this.init()},methods:{async init(){this.showLoading();const o=[this.getAllProducts(),this.getSingleProduct()];(await Promise.allSettled(o)).forEach(a=>{a.status==="rejected"&&(this.hideLoading(),this.$swal(a.response.data))}),this.hideLoading()},async getSingleProduct(){try{const o=`${q}/api/${B}/product/${this.id}`,s=await this.$http.get(o);this.product=s.data.product}catch(o){this.hideLoading();const{message:s}=o.response.data;this.$swal(Array.isArray(s)?s[0]:s)}},...p(V,["postCart"]),...p(g,["showLoading","hideLoading"]),...p(z,["getAllProducts"])},computed:{...L(g,["loadingStatus"])}},f=o=>(I("data-v-94463b1b"),o=o(),T(),o),N={key:0,class:"container py-10"},D={class:"flex flex-col sm:flex-row pb-16"},M={class:"sm:w-1/2 pb-5 sm:pb-0 sm:pr-4 h-96"},O={class:"w-full h-4/5 mx-auto *:rounded-sm *:overflow-hidden","thumbs-swiper":".thumbs","space-between":"10",navigation:"true"},F={lazy:"true"},H=["src"],G=["src"],J={class:"thumbs h-1/5 pt-2 *:w-1/4 *:h-full *:opacity-40 *:cursor-pointer *:rounded-sm *:overflow-hidden","slides-per-view":"4","free-mode":"true","space-between":"10","watch-slides-progress":"true"},K={lazy:"true"},Q=["src"],W=["src"],X={class:"sm:w-1/2 sm:pl-4 flex flex-col justify-between"},Y={class:"font-bold text-2xl text-primary-800 mb-3"},Z={class:"mb-5"},$={class:"mb-5"},tt={class:"mb-5"},et={class:"text-2xl text-primary-800 mr-1"},st={key:0},ot=f(()=>t("p",null,"數量",-1)),rt={class:"flex w-fit border-2 border-primary-700 rounded mb-5 *:px-3 *:py-2"},it=["disabled"],nt={class:"flex justify-between items-center mb-5"},ct=f(()=>t("h2",{class:"text-primary-800 text-xl font-bold"},"推薦商品",-1));function lt(o,s,a,at,e,dt){const w=_("LoadingBtn"),x=_("RouterLink"),v=_("ProductSwiper");return Object.keys(e.product).length?(n(),i("div",N,[t("div",D,[t("div",M,[t("swiper-container",O,[t("swiper-slide",F,[t("img",{class:"object-cover h-full w-full",loading:"lazy",src:e.product.imageUrl,alt:"產品圖"},null,8,H)]),(n(!0),i(u,null,b(e.product.imagesUrl,(r,d)=>(n(),i("swiper-slide",{key:`img${d}`,lazy:"true"},[t("img",{class:"object-fit",loading:"lazy",src:r,alt:"產品圖"},null,8,G)]))),128))]),t("swiper-container",J,[t("swiper-slide",K,[t("img",{loading:"lazy",class:"object-cover h-full w-full",src:e.product.imageUrl,alt:"產品圖"},null,8,Q)]),(n(!0),i(u,null,b(e.product.imagesUrl,(r,d)=>(n(),i("swiper-slide",{key:`img${d}`,lazy:"true"},[t("img",{class:"object-fit",loading:"lazy",src:r,alt:"產品圖"},null,8,W)]))),128))])]),t("div",X,[t("h2",Y,c(e.product.title),1),t("p",Z,c(e.product.unit),1),t("p",$,c(e.product.description),1),t("p",tt,[t("span",et,[e.product.price!==e.product.origin_price?(n(),i(u,{key:0},[l("特惠")],64)):m("",!0),l(" NT$ "+c(e.product.price),1)]),e.product.price!==e.product.origin_price?(n(),i("del",st,"NT$ "+c(e.product.origin_price),1)):m("",!0)]),ot,t("div",rt,[t("button",{type:"button",class:"transition-colors hover:bg-primary-700 hover:text-primary-50 focus:bg-primary-700 focus:text-primary-50 active:bg-primary-700 active:text-primary-50 disabled:text-stone-500 disabled:bg-stone-100 disabled:cursor-not-allowed",onClick:s[0]||(s[0]=r=>e.qty--),disabled:e.qty===1}," － ",8,it),k(t("input",{type:"text",class:"border-y-0 bg-transparent w-10 text-center border-x border-primary-700 focus:ring-primary-700","onUpdate:modelValue":s[1]||(s[1]=r=>e.qty=r),readonly:""},null,512),[[P,e.qty]]),t("button",{type:"button",class:"transition-colors hover:bg-primary-700 hover:text-primary-50 focus:bg-primary-700 focus:text-primary-50 active:bg-primary-700 active:text-primary-50 disabled:text-stone-500 disabled:bg-stone-100/50 disabled:cursor-not-allowed",onClick:s[2]||(s[2]=r=>e.qty++)}," ＋ ")]),h(w,{class:"btn btn-primary w-full mt-auto",onClick:s[3]||(s[3]=A(r=>o.postCart(e.product.id,e.qty),["prevent"])),"is-loading":o.loadingStatus.productId===e.product.id},{default:y(()=>[l("加入購物車")]),_:1},8,["is-loading"])])]),t("div",nt,[ct,h(x,{to:"/products",class:"btn btn-link"},{default:y(()=>[l("查看所有商品")]),_:1})]),h(v)])):m("",!0)}const gt=S(R,[["render",lt],["__scopeId","data-v-94463b1b"]]);export{gt as default};
