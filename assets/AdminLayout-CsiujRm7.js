import{_ as p,o as c,e as h,w as r,f as L,T as M,m as b,c as x,b as e,a as s,d as a,n as y,r as d,g as _,F as C}from"./index-CQupeNWV.js";import{l as g}from"./loadingStore-BThw59I3.js";import{L as T}from"./LogoComponent-HdjwMevT.js";import{M as R}from"./MyLoading-Duuv2Y0M.js";const V={};function E(o,t){return c(),h(M,{name:"accordion"},{default:r(()=>[L(o.$slots,"default")]),_:3})}const A=p(V,[["render",E]]);var S={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/Chocolate-Shop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:O}=S,I={data(){return{isMenuOpen:!1}},props:["ulClass"],methods:{async logout(){try{this.showLoading();const o=`${O}/logout`;await this.$http.post(o),document.cookie='token=; expires=Thu, 01 Jan 1970 00:00:00 GMT";',this.$router.push("/login")}catch{this.$swal("登出失敗，請再試一次")}finally{this.hideLoading()}},...b(g,["showLoading","hideLoading"])}},N={class:"mb-4 font-bold"},U=e("i",{class:"bi bi-clipboard-data-fill me-4"},null,-1),j={class:"mb-4 font-bold"},B=e("i",{class:"bi bi-bag-fill me-4"},null,-1),D={class:"mb-4 font-bold"},z=e("i",{class:"bi bi-ticket-perforated-fill me-4"},null,-1),P={class:"mb-4 font-bold"},F=e("i",{class:"bi bi-stickies-fill me-4"},null,-1),H={class:"mb-4 font-bold"},G=e("i",{class:"bi bi-file-richtext-fill me-4"},null,-1),J={class:"font-bold mt-2 md:mt-auto"},W=e("i",{class:"bi bi-door-open-fill me-4"},null,-1);function q(o,t,m,v,u,l){const i=d("RouterLink");return c(),x("ul",{class:y(["text-primary-950 bg-primary-100 flex-grow flex flex-col justify-center w-full md:text-lg md:justify-start",m.ulClass])},[e("li",N,[s(i,{to:"/admin/dashboard",class:"block text-center py-3 mx-2 rounded-md hover:bg-primary-800 hover:text-primary-200 hover:shadow-md duration-300 md:pl-7 md:text-left",onClick:t[0]||(t[0]=n=>o.$emit("close-menu"))},{default:r(()=>[U,a("總覽 ")]),_:1})]),e("li",j,[s(i,{to:"/admin/products",class:"block text-center py-3 mx-2 rounded-md hover:bg-primary-800 hover:text-primary-200 hover:shadow-md duration-300 md:pl-7 md:text-left",onClick:t[1]||(t[1]=n=>o.$emit("close-menu"))},{default:r(()=>[B,a("產品 ")]),_:1})]),e("li",D,[s(i,{to:"/admin/coupons",class:"block text-center py-3 mx-2 rounded-md hover:bg-primary-800 hover:text-primary-200 hover:shadow-md duration-300 md:pl-7 md:text-left",onClick:t[2]||(t[2]=n=>o.$emit("close-menu"))},{default:r(()=>[z,a("優惠券 ")]),_:1})]),e("li",P,[s(i,{to:"/admin/orders",class:"block text-center py-3 mx-2 rounded-md hover:bg-primary-800 hover:text-primary-200 hover:shadow-md duration-300 md:pl-7 md:text-left",onClick:t[3]||(t[3]=n=>o.$emit("close-menu"))},{default:r(()=>[F,a("訂單 ")]),_:1})]),e("li",H,[s(i,{to:"/admin/articles",class:"block text-center py-3 mx-2 rounded-md hover:bg-primary-800 hover:text-primary-200 hover:shadow-md duration-300 md:pl-7 md:text-left",onClick:t[4]||(t[4]=n=>o.$emit("close-menu"))},{default:r(()=>[G,a("文章 ")]),_:1})]),e("li",J,[e("a",{class:"block text-center cursor-pointer py-3 rounded-md duration-300 hover:bg-primary-800 hover:text-primary-200 hover:shadow-md md:pl-7 md:mx-2 md:text-left",onClick:t[5]||(t[5]=(...n)=>l.logout&&l.logout(...n))},[W,a("登出 ")])])],2)}const K=p(I,[["render",q]]);var Q={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"jiayu",BASE_URL:"/Chocolate-Shop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:X}=Q,Y={data(){return{checkSuccess:!1,isMenuOpen:!1}},components:{LogoComponent:T,TransitionAccordion:A,AdminNav:K,MyLoading:R},mounted(){var t;const o=(t=document.cookie.split("; ").find(m=>m.startsWith("token=")))==null?void 0:t.split("=")[1];this.$http.defaults.headers.common.Authorization=o,this.checkout()},methods:{async checkout(){this.showLoading();try{const o=`${X}/api/user/check`;await this.$http.post(o),this.checkSuccess=!0,this.hideLoading()}catch{this.hideLoading(),await this.$swal("請再登入一次"),this.$router.push("/login")}},closeMenu(){this.isMenuOpen=!1},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},...b(g,["showLoading","hideLoading"])}},Z={class:"md:flex h-dvh"},ee={class:"hidden md:flex flex-col w-1/5 max-w-72 bg-primary-100 py-8 border-r-2 border-primary-200/20"},te={class:"bg-primary-100 fixed top-0 md:hidden w-full"},oe={class:"container flex justify-between items-center border-b-2 border-primary-300/50"},se={class:"mt-[74px] bg-primary-50 md:flex-grow md:mt-0"},ne={class:"container py-8"};function ie(o,t,m,v,u,l){const i=d("MyLoading"),n=d("LogoComponent"),f=d("AdminNav"),k=d("TransitionAccordion"),$=d("RouterView");return c(),x(C,null,[s(i),e("div",Z,[e("div",ee,[s(n,{class:"mb-8",size:"4xl"}),s(f)]),e("div",te,[e("div",oe,[s(n,{size:"2xl"}),e("button",{type:"button",class:"btn btn-link p-2 my-2 -mr-2 text-primary-950",onClick:t[0]||(t[0]=(...w)=>l.toggleMenu&&l.toggleMenu(...w))},[e("i",{class:y(["bi text-4xl",`${u.isMenuOpen?"bi-x":"bi-list"}`])},null,2)])]),s(k,null,{default:r(()=>[u.isMenuOpen?(c(),h(f,{key:0,"ul-class":"absolute overflow-y-hidden h-[376px]",onCloseMenu:l.closeMenu},null,8,["onCloseMenu"])):_("",!0)]),_:1})]),e("div",se,[e("div",ne,[u.checkSuccess?(c(),h($,{key:0})):_("",!0)])])])],64)}const ce=p(Y,[["render",ie]]);export{ce as default};
